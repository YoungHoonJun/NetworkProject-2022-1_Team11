저희 팀에서는 오디오나 비디오 데이터의 스트리밍을 위해 사용되는 Real time protocol, 즉 RTP라는 프로토콜에서 아이디어를 얻어서 리얼타임 스트리밍을 위한 간단한 프로토콜을 추가했습니다.

먼저 기존의 RTP를 보게 되면, UDP 위에서 동작하고, RTP Packet Header를 통해 Sequence number와 Timestamp 등의 정보를 함께 전송해 UDP에서 발생할 수 있는 Packet loss에 대해서 빠르게 Retransmit을 할 수 있도록 지원하고 있습니다.

저희가 구현한 RTP 헤더는 기존의 헤더에서는 저희가 제작한 비디오 스트리밍 어플리케이션에 필수적인 Sequence number만 남겨두고 각 프레임을 구분할 수 있도록 이번 프레임의 마지막 시퀀스 넘버를 알려주는 값을 추가해 주었습니다. 그리고 Sequence number의 크기를 기존의 16비트에서 32비트로 확장해 충분히 큰 Sequence number도 스트리밍 어플리케이션에서 사용할 수 있도록 해 주었습니다.
이렇게 구현된 헤더는 기존의 12바이트에서 4바이트 축소된 8바이트의 헤더 크기를 갖습니다.

지금 보시는 코드들은 구현된 RTP 헤더 소스 코드의 일부인데요, 각  필드는 32비트의 unsigned integer 값으로 구현했고, 재전송이 필요 없을 때 sequence number를 0으로 설정해 보내주는 방식으로 사용되는 것을 확인할 수 있습니다.